<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triagem de Paciente</title>
    <link rel="stylesheet" href="style.css"> <!-- Reutilizando o estilo existente -->
</head>
<body>
    <header>
        <div id="navbar-placeholder"></div>
    </header>
    <main>
        <section>
            <h1 id="titulo">Triagem e Atendimento</h1>
            <p id="subtitulo">Identifique o paciente para iniciar o atendimento.</p>
        </section>

        <!-- PASSO 1: Busca por CPF -->
        <fieldset class="grupo">
            <legend>Busca de Paciente</legend>
            <label for="cpf-busca">CPF do Paciente</label>
            <input type="text" id="cpf-busca" placeholder="Digite o CPF e clique em buscar" required>
            <button id="btn-buscar-cpf" class="botao">Buscar</button>
            <div style="margin-top: 15px;">
                <input type="checkbox" id="emergencia-sem-cadastro">
                <label for="emergencia-sem-cadastro">Atendimento de Emergência (sem cadastro completo)</label>
            </div>
        </fieldset>

        <!-- PASSO 2: Formulário principal, inicialmente oculto -->
        <form id="form-triagem" class="hidden">
            
            <!-- Seção de Dados do Paciente (preenchida via API ou pelo formulário de novo paciente) -->
            <fieldset class="grupo" id="dados-paciente-secao">
                <legend>Informações Pessoais</legend>
                <div id="dados-paciente-existente" class="hidden">
                    <p><strong>Nome:</strong> <span id="nome-paciente"></span></p>
                    <p><strong>Data de Nascimento:</strong> <span id="nascimento-paciente"></span></p>
                    <p><strong>Sexo:</strong> <span id="sexo-paciente"></span></p>
                </div>
                <!-- Formulário para novo paciente (inicialmente oculto) -->
                <div id="form-novo-paciente" class="hidden">
                    <label for="nome">Nome Completo</label>
                    <input type="text" name="nome" id="nome" required>
                    
                    <label for="nascimento">Data de Nascimento</label>
                    <input type="date" name="nascimento" id="nascimento" required>

                    <label for="sexo">Gênero</label>
                    <div class="opcoes">
                        <label><input type="radio" name="sexo" value="feminino" checked> Feminino</label>
                        <label><input type="radio" name="sexo" value="masculino"> Masculino</label>
                        <label><input type="radio" name="sexo" value="outro"> Outro</label>
                    </div>

                    <label for="cep">CEP</label>
                    <input type="text" name="cep" id="cep">

                    <label for="telefone">Telefone</label>
                    <input type="tel" name="telefone" id="telefone">
                </div>

                <!-- Formulário para atendimento de emergência (inicialmente oculto) -->
                <div id="form-emergencia-sem-cadastro" class="hidden">
                    <label for="nome-emergencia">Nome Completo</label>
                    <input type="text" name="nome-emergencia" id="nome-emergencia" required>

                    <label for="cpf-emergencia">CPF</label>
                    <input type="text" name="cpf-emergencia" id="cpf-emergencia" placeholder="Opcional para emergência">

                    <label for="nascimento-emergencia">Data de Nascimento</label>
                    <input type="date" name="nascimento-emergencia" id="nascimento-emergencia">

                    <label for="sexo-emergencia">Gênero</label>
                    <div class="opcoes">
                        <label><input type="radio" name="sexo-emergencia" value="feminino" checked> Feminino</label>
                        <label><input type="radio" name="sexo-emergencia" value="masculino"> Masculino</label>
                        <label><input type="radio" name="sexo-emergencia" value="outro"> Outro</label>
                    </div>

                    <label for="peso-emergencia">Peso (kg)</label>
                    <input type="number" id="peso-emergencia" name="peso-emergencia" step="0.1" min="0">

                    <label for="altura-emergencia">Altura (cm)</label>
                    <input type="number" id="altura-emergencia" name="altura-emergencia" step="1" min="0">
                </div>
            </fieldset>

            <!-- Seção de Motivo da Consulta -->
            <fieldset class="grupo">
                <legend>Motivo da Consulta (Principal Queixa)</legend>
                <textarea id="motivo" name="motivo" rows="3" placeholder="Descreva a principal queixa do paciente"></textarea>
            </fieldset>

            <!-- Seção de Sinais Vitais e Alergias (Tarefa 4) -->
            <fieldset class="grupo">
                <legend>Sinais Vitais e Informações Críticas</legend>
                <div class="sinais-vitais-grid">
                    <div>
                        <label for="temperatura">Temperatura (°C)</label>
                        <input type="number" id="temperatura" name="temperatura" step="0.1" min="34" max="42">
                    </div>
                    <div>
                        <label for="pressao">Pressão Arterial (mmHg)</label>
                        <input type="text" id="pressao" name="pressao" placeholder="Ex: 120/80">
                    </div>
                    <div>
                        <label for="glicemia">Glicemia (mg/dL)</label>
                        <input type="number" id="glicemia" name="glicemia" min="0">
                    </div>
                    <div>
                        <label for="spo2">SPO2 (%)</label>
                        <input type="number" id="spo2" name="spo2" min="0" max="100">
                    </div>
                    <div class="full-width">
                        <label for="alergias">Alergias Conhecidas</label>
                        <textarea id="alergias" name="alergias" rows="2" placeholder="Liste alergias a medicamentos, alimentos, etc."></textarea>
                    </div>
                    <div class="full-width">
                        <label for="medicamentos_uso">Medicamentos em Uso</label>
                        <textarea id="medicamentos_uso" name="medicamentos_uso" rows="2" placeholder="Liste medicamentos de uso contínuo"></textarea>
                    </div>
                </div>
            </fieldset>

            <fieldset class="grupo">
                <legend>Doenças / CID (Opcional)</legend>
                <div class="form-group">
                    <label for="doencaSelect">Selecione uma Doença/CID:</label>
                    <select id="doencaSelect"></select>
                </div>
                <p class="info-text">Selecionar uma doença/CID pode pré-selecionar sintomas comuns.</p>
            </fieldset>

            <!-- Seção de Sintomas -->
            <fieldset class="grupo">
                <legend>Sintomas</legend>
                <div id="sintomasCategorias"></div>
            </fieldset>

            <!-- Campo para Observações (Tarefa 5) -->
            <fieldset class="grupo">
                <legend>Observações Adicionais</legend>
                <textarea id="observacoes" name="observacoes" rows="4" placeholder="Ex: Paciente agressivo, recusa de triagem, etc."></textarea>
            </fieldset>

            <div>
                <button type="submit" class="botao">Registrar Atendimento e Classificar</button>
            </div>
        </form>

    </main>

    <script src="src/triagem.js"></script>
    
</body>
</html>
